{"ast":null,"code":"import qs from \"qs\";\nexport const getApiBaseUrl = url => (process.env.REACT_APP_BASE_API_URL || \"/api/\") + url;\nconst getOptions = options => ({\n  ...options,\n  credentials: \"include\"\n});\nconst fetchInternal = (url, method, options) => fetch(getApiBaseUrl(url), {\n  ...getOptions(options),\n  method\n}).then(async response => {\n  if (!response.ok) {\n    if (response.status === 401 && window.location.pathname !== \"/auth\" && window.location.pathname !== \"/idpauth\" && window.location.pathname !== \"/login\" && window.location.pathname !== \"orgselect\") {\n      window.location.href = \"/auth?\" + qs.stringify({\n        retpath: window.location.pathname\n      });\n    } else {\n      throw new Error(await response.text());\n    }\n  }\n  return response;\n});\nconst fetchJSON = (url, method, options) => fetchInternal(url, method, options).then(response => response.json());\nconst getMutationOptions = body => ({\n  body: JSON.stringify(body),\n  headers: {\n    \"content-type\": \"application/json\"\n  }\n});\nconst backend = {\n  get: (url, options) => fetchJSON(url, \"GET\", options),\n  post: (url, body) => fetchJSON(url, \"POST\", getMutationOptions(body)),\n  postPlain: (url, body) => fetchInternal(url, \"POST\", getMutationOptions(body)),\n  delete: url => fetchInternal(url, \"DELETE\"),\n  put: (url, body) => fetchJSON(url, \"PUT\", getMutationOptions(body))\n};\nexport default backend;","map":{"version":3,"names":["qs","getApiBaseUrl","url","process","env","REACT_APP_BASE_API_URL","getOptions","options","credentials","fetchInternal","method","fetch","then","response","ok","status","window","location","pathname","href","stringify","retpath","Error","text","fetchJSON","json","getMutationOptions","body","JSON","headers","backend","get","post","postPlain","delete","put"],"sources":["C:/Temp/Quack/ui/src/src/services/backend.js"],"sourcesContent":["import qs from \"qs\";\nexport const getApiBaseUrl = url => (process.env.REACT_APP_BASE_API_URL || \"/api/\") + url;\nconst getOptions = options => ({\n  ...options,\n  credentials: \"include\",\n});\n\nconst fetchInternal = (url, method, options) =>\n  fetch(getApiBaseUrl(url), { ...getOptions(options), method }).then(async response => {\n    if (!response.ok) {\n      if (response.status === 401 && window.location.pathname !== \"/auth\" && window.location.pathname !== \"/idpauth\" && window.location.pathname !== \"/login\" &&  window.location.pathname !== \"orgselect\") {\n        window.location.href = \"/auth?\" + qs.stringify({ retpath: window.location.pathname });\n      } else {\n        throw new Error(await response.text());\n      }\n    }\n    return response;\n  });\nconst fetchJSON = (url, method, options) => fetchInternal(url, method, options).then(response => response.json());\nconst getMutationOptions = body => ({\n  body: JSON.stringify(body),\n  headers: { \"content-type\": \"application/json\" },\n});\n\nconst backend = {\n  get: (url, options) => fetchJSON(url, \"GET\", options),\n  post: (url, body) => fetchJSON(url, \"POST\", getMutationOptions(body)),\n  postPlain: (url, body) => fetchInternal(url, \"POST\", getMutationOptions(body)),\n  delete: url => fetchInternal(url, \"DELETE\"),\n  put: (url, body) => fetchJSON(url, \"PUT\", getMutationOptions(body)),\n};\n\nexport default backend;\n"],"mappings":"AAAA,OAAOA,EAAE,MAAM,IAAI;AACnB,OAAO,MAAMC,aAAa,GAAGC,GAAG,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,sBAAsB,IAAI,OAAO,IAAIH,GAAG;AACzF,MAAMI,UAAU,GAAGC,OAAO,KAAK;EAC7B,GAAGA,OAAO;EACVC,WAAW,EAAE;AACf,CAAC,CAAC;AAEF,MAAMC,aAAa,GAAGA,CAACP,GAAG,EAAEQ,MAAM,EAAEH,OAAO,KACzCI,KAAK,CAACV,aAAa,CAACC,GAAG,CAAC,EAAE;EAAE,GAAGI,UAAU,CAACC,OAAO,CAAC;EAAEG;AAAO,CAAC,CAAC,CAACE,IAAI,CAAC,MAAMC,QAAQ,IAAI;EACnF,IAAI,CAACA,QAAQ,CAACC,EAAE,EAAE;IAChB,IAAID,QAAQ,CAACE,MAAM,KAAK,GAAG,IAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,OAAO,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,UAAU,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,QAAQ,IAAKF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,WAAW,EAAE;MACpMF,MAAM,CAACC,QAAQ,CAACE,IAAI,GAAG,QAAQ,GAAGnB,EAAE,CAACoB,SAAS,CAAC;QAAEC,OAAO,EAAEL,MAAM,CAACC,QAAQ,CAACC;MAAS,CAAC,CAAC;IACvF,CAAC,MAAM;MACL,MAAM,IAAII,KAAK,CAAC,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC,CAAC;IACxC;EACF;EACA,OAAOV,QAAQ;AACjB,CAAC,CAAC;AACJ,MAAMW,SAAS,GAAGA,CAACtB,GAAG,EAAEQ,MAAM,EAAEH,OAAO,KAAKE,aAAa,CAACP,GAAG,EAAEQ,MAAM,EAAEH,OAAO,CAAC,CAACK,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACY,IAAI,CAAC,CAAC,CAAC;AACjH,MAAMC,kBAAkB,GAAGC,IAAI,KAAK;EAClCA,IAAI,EAAEC,IAAI,CAACR,SAAS,CAACO,IAAI,CAAC;EAC1BE,OAAO,EAAE;IAAE,cAAc,EAAE;EAAmB;AAChD,CAAC,CAAC;AAEF,MAAMC,OAAO,GAAG;EACdC,GAAG,EAAEA,CAAC7B,GAAG,EAAEK,OAAO,KAAKiB,SAAS,CAACtB,GAAG,EAAE,KAAK,EAAEK,OAAO,CAAC;EACrDyB,IAAI,EAAEA,CAAC9B,GAAG,EAAEyB,IAAI,KAAKH,SAAS,CAACtB,GAAG,EAAE,MAAM,EAAEwB,kBAAkB,CAACC,IAAI,CAAC,CAAC;EACrEM,SAAS,EAAEA,CAAC/B,GAAG,EAAEyB,IAAI,KAAKlB,aAAa,CAACP,GAAG,EAAE,MAAM,EAAEwB,kBAAkB,CAACC,IAAI,CAAC,CAAC;EAC9EO,MAAM,EAAEhC,GAAG,IAAIO,aAAa,CAACP,GAAG,EAAE,QAAQ,CAAC;EAC3CiC,GAAG,EAAEA,CAACjC,GAAG,EAAEyB,IAAI,KAAKH,SAAS,CAACtB,GAAG,EAAE,KAAK,EAAEwB,kBAAkB,CAACC,IAAI,CAAC;AACpE,CAAC;AAED,eAAeG,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module"}