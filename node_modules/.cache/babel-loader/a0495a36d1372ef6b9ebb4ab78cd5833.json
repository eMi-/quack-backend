{"ast":null,"code":"var _jsxFileName = \"C:\\\\Temp\\\\Quack\\\\ui\\\\src\\\\src\\\\user\\\\ChangePassword.js\";\nimport React from \"react\";\nimport { withRouter } from \"react-router\";\nimport SubComponent from \"../common/SubComponent\";\nimport * as Utils from \"../common/Utils\";\nimport Backend from \"../services/backend\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ChangePassword extends SubComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      session: {\n        person: {}\n      }\n    };\n    this.state.profileId = this.props.match.params.profileId;\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getSession = this.getSession.bind(this);\n  }\n  componentDidMount() {\n    super.componentDidMount();\n    this.getSession();\n  }\n  getSession() {\n    Backend.get(\"user/session\").then(response => {\n      this.state.session = response;\n      this.setState(this.state);\n    }).catch(() => {\n      console.log(\"Unable to fetch session\");\n    });\n  }\n  handleChange(event) {\n    this.state[event.target.name] = event.target.value;\n    this.setState(this.state);\n  }\n  isPasswordValid(password) {\n    return password && password.length > 4;\n  }\n  handleSubmit(event) {\n    if (!this.isPasswordValid(this.state.password)) {\n      Utils.onErrorMessage(\"Password is invalid\");\n      event.preventDefault();\n      return;\n    }\n    Backend.postPlain(\"user/change-password\", {\n      newPassword: this.state.password,\n      login: this.state.profileId\n    }).then(response => {\n      Utils.onSuccessMessage(\"Password successfully updated\");\n    }).catch(error => {\n      Utils.onErrorMessage(\"Couldn't change password: \", error);\n    });\n    event.preventDefault();\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: Utils.isUserOwnerOrAdmin(this.state.session, this.state.session.person.login) && /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-signin\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-3 font-weight-normal\",\n          children: \"Change Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          className: \"form-control\",\n          placeholder: \"New Password\",\n          required: \"\",\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-lg btn-primary btn-block\",\n          onClick: this.handleSubmit,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default _c = withRouter(ChangePassword);\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","withRouter","SubComponent","Utils","Backend","jsxDEV","_jsxDEV","ChangePassword","constructor","props","state","session","person","profileId","match","params","handleChange","bind","handleSubmit","getSession","componentDidMount","get","then","response","setState","catch","console","log","event","target","name","value","isPasswordValid","password","length","onErrorMessage","preventDefault","postPlain","newPassword","login","onSuccessMessage","error","render","className","children","isUserOwnerOrAdmin","fileName","_jsxFileName","lineNumber","columnNumber","type","id","placeholder","required","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Temp/Quack/ui/src/src/user/ChangePassword.js"],"sourcesContent":["import React from \"react\";\nimport { withRouter } from \"react-router\";\nimport SubComponent from \"../common/SubComponent\";\nimport * as Utils from \"../common/Utils\";\nimport Backend from \"../services/backend\";\n\nclass ChangePassword extends SubComponent {\n  state = {session: {person:{}}};\n\n  constructor(props) {\n    super(props);\n    this.state.profileId = this.props.match.params.profileId;\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.getSession = this.getSession.bind(this);\n  }\n\n  componentDidMount() {\n    super.componentDidMount();\n    this.getSession();\n  }\n\n  getSession() {\n    Backend.get(\"user/session\")\n      .then(response => {\n        this.state.session = response;\n        this.setState(this.state);\n      })\n      .catch(() => {console.log(\"Unable to fetch session\");});\n  }\n\n  handleChange(event) {\n    this.state[event.target.name] = event.target.value;\n    this.setState(this.state);\n  }\n\n  isPasswordValid(password) {\n    return password && password.length > 4;\n  }\n\n  handleSubmit(event) {\n    if (!this.isPasswordValid(this.state.password)) {\n      Utils.onErrorMessage(\"Password is invalid\");\n      event.preventDefault();\n      return;\n    }\n    Backend.postPlain(\"user/change-password\", { newPassword: this.state.password, login: this.state.profileId })\n      .then(response => {\n        Utils.onSuccessMessage(\"Password successfully updated\");\n      })\n      .catch(error => {\n        Utils.onErrorMessage(\"Couldn't change password: \", error);\n      });\n    event.preventDefault();\n  }\n\n  render() {\n    return (\n      <div className=\"text-center\">\n        {Utils.isUserOwnerOrAdmin(this.state.session, this.state.session.person.login) && (\n            <form className=\"form-signin\">\n              <h1 className=\"h3 mb-3 font-weight-normal\">Change Password</h1>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                className=\"form-control\"\n                placeholder=\"New Password\"\n                required=\"\"\n                onChange={this.handleChange}\n              />\n              <button className=\"btn btn-lg btn-primary btn-block\" onClick={this.handleSubmit}>\n                Submit\n              </button>\n            </form>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(ChangePassword);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}