{"ast":null,"code":"var _jsxFileName = \"C:\\\\Temp\\\\Quack\\\\ui\\\\src\\\\src\\\\launches\\\\LaunchesTrendWidget.js\";\nimport React from \"react\";\nimport SubComponent from \"../common/SubComponent\";\nimport * as Utils from \"../common/Utils\";\nimport { FadeLoader } from \"react-spinners\";\nimport Highcharts from \"highcharts\";\nimport Backend from \"../services/backend\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass LaunchesTrendWidget extends SubComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      launches: [],\n      filter: {\n        skip: 0,\n        limit: 20,\n        orderby: \"id\",\n        orderdir: \"DESC\",\n        includedFields: \"launchStats,createdTime\"\n      },\n      loading: true\n    };\n    this.getLaunches = this.getLaunches.bind(this);\n    this.renderChart = this.renderChart.bind(this);\n    this.getSeries = this.getSeries.bind(this);\n  }\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.projectId) {\n      this.state.projectId = nextProps.projectId;\n    }\n    if (nextProps.filter) {\n      this.state.filter = nextProps.filter;\n    }\n    this.getLaunches();\n  }\n  componentDidMount() {\n    super.componentDidMount();\n    this.getLaunches();\n  }\n  getLaunches() {\n    if (!this.state.projectId) {\n      return [];\n    }\n    Backend.get(this.state.projectId + \"/launch?\" + Utils.filterToQuery(this.state.filter)).then(response => {\n      this.state.launches = response.reverse();\n      this.state.loading = false;\n      this.renderChart();\n      this.setState(this.state);\n    }).catch(error => {\n      Utils.onErrorMessage(\"Couldn't get launches: \", error);\n      this.state.loading = false;\n      this.setState(this.state);\n    });\n  }\n  renderChart() {\n    Highcharts.chart(\"trend\", {\n      title: {\n        text: \"Launches Statuses Trend\"\n      },\n      yAxis: {\n        title: {\n          text: \"TestCases\"\n        }\n      },\n      xAxis: {\n        categories: this.state.launches.map(launch => Utils.timeToDateNoTime(launch.createdTime))\n      },\n      legend: {\n        layout: \"vertical\",\n        align: \"right\",\n        verticalAlign: \"middle\"\n      },\n      plotOptions: {\n        series: {\n          label: {\n            connectorAllowed: false\n          }\n        }\n      },\n      series: this.getSeries(),\n      responsive: {\n        rules: [{\n          condition: {\n            maxWidth: 500\n          },\n          chartOptions: {\n            legend: {\n              layout: \"horizontal\",\n              align: \"center\",\n              verticalAlign: \"bottom\"\n            }\n          }\n        }]\n      }\n    });\n  }\n  getSeries() {\n    var totalStats = {\n      PASSED: {\n        name: \"Passed\",\n        color: \"#28a745\",\n        data: []\n      },\n      FAILED: {\n        name: \"Failed\",\n        color: \"#dc3545\",\n        data: []\n      },\n      BROKEN: {\n        name: \"Broken\",\n        color: \"#ffc107\",\n        data: []\n      },\n      SKIPPED: {\n        name: \"Skipped\",\n        color: \"#6c757d\",\n        data: []\n      },\n      TOTAL: {\n        name: \"Total\",\n        color: \"#007bff\",\n        data: []\n      }\n    };\n    this.state.launches.forEach(launch => {\n      Object.keys(launch.launchStats.statusCounters).forEach(key => {\n        if (totalStats[key]) {\n          totalStats[key].data.push(launch.launchStats.statusCounters[key]);\n        }\n      });\n      totalStats[\"TOTAL\"].data.push(launch.launchStats.total);\n    });\n    return Object.keys(totalStats).map(key => totalStats[key]);\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"trend\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"sweet-loading\",\n        children: /*#__PURE__*/_jsxDEV(FadeLoader, {\n          sizeUnit: \"px\",\n          size: 100,\n          color: \"#135f38\",\n          loading: this.state.loading\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default LaunchesTrendWidget;","map":{"version":3,"names":["React","SubComponent","Utils","FadeLoader","Highcharts","Backend","jsxDEV","_jsxDEV","LaunchesTrendWidget","constructor","props","state","launches","filter","skip","limit","orderby","orderdir","includedFields","loading","getLaunches","bind","renderChart","getSeries","componentWillReceiveProps","nextProps","projectId","componentDidMount","get","filterToQuery","then","response","reverse","setState","catch","error","onErrorMessage","chart","title","text","yAxis","xAxis","categories","map","launch","timeToDateNoTime","createdTime","legend","layout","align","verticalAlign","plotOptions","series","label","connectorAllowed","responsive","rules","condition","maxWidth","chartOptions","totalStats","PASSED","name","color","data","FAILED","BROKEN","SKIPPED","TOTAL","forEach","Object","keys","launchStats","statusCounters","key","push","total","render","children","id","fileName","_jsxFileName","lineNumber","columnNumber","sizeUnit","size"],"sources":["C:/Temp/Quack/ui/src/src/launches/LaunchesTrendWidget.js"],"sourcesContent":["import React from \"react\";\nimport SubComponent from \"../common/SubComponent\";\nimport * as Utils from \"../common/Utils\";\nimport { FadeLoader } from \"react-spinners\";\nimport Highcharts from \"highcharts\";\nimport Backend from \"../services/backend\";\n\nclass LaunchesTrendWidget extends SubComponent {\n  state = {\n    launches: [],\n    filter: {\n      skip: 0,\n      limit: 20,\n      orderby: \"id\",\n      orderdir: \"DESC\",\n      includedFields: \"launchStats,createdTime\",\n    },\n    loading: true,\n  };\n\n  constructor(props) {\n    super(props);\n    this.getLaunches = this.getLaunches.bind(this);\n    this.renderChart = this.renderChart.bind(this);\n    this.getSeries = this.getSeries.bind(this);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.projectId) {\n      this.state.projectId = nextProps.projectId;\n    }\n    if (nextProps.filter) {\n      this.state.filter = nextProps.filter;\n    }\n    this.getLaunches();\n  }\n\n  componentDidMount() {\n    super.componentDidMount();\n    this.getLaunches();\n  }\n\n  getLaunches() {\n    if (!this.state.projectId) {\n      return [];\n    }\n    Backend.get(this.state.projectId + \"/launch?\" + Utils.filterToQuery(this.state.filter))\n      .then(response => {\n        this.state.launches = response.reverse();\n        this.state.loading = false;\n        this.renderChart();\n        this.setState(this.state);\n      })\n      .catch(error => {\n        Utils.onErrorMessage(\"Couldn't get launches: \", error);\n        this.state.loading = false;\n        this.setState(this.state);\n      });\n  }\n\n  renderChart() {\n    Highcharts.chart(\"trend\", {\n      title: {\n        text: \"Launches Statuses Trend\",\n      },\n\n      yAxis: {\n        title: {\n          text: \"TestCases\",\n        },\n      },\n\n      xAxis: {\n        categories: this.state.launches.map(launch => Utils.timeToDateNoTime(launch.createdTime)),\n      },\n\n      legend: {\n        layout: \"vertical\",\n        align: \"right\",\n        verticalAlign: \"middle\",\n      },\n\n      plotOptions: {\n        series: {\n          label: {\n            connectorAllowed: false,\n          },\n        },\n      },\n      series: this.getSeries(),\n      responsive: {\n        rules: [\n          {\n            condition: {\n              maxWidth: 500,\n            },\n            chartOptions: {\n              legend: {\n                layout: \"horizontal\",\n                align: \"center\",\n                verticalAlign: \"bottom\",\n              },\n            },\n          },\n        ],\n      },\n    });\n  }\n\n  getSeries() {\n    var totalStats = {\n      PASSED: { name: \"Passed\", color: \"#28a745\", data: [] },\n      FAILED: { name: \"Failed\", color: \"#dc3545\", data: [] },\n      BROKEN: { name: \"Broken\", color: \"#ffc107\", data: [] },\n      SKIPPED: { name: \"Skipped\", color: \"#6c757d\", data: [] },\n      TOTAL: { name: \"Total\", color: \"#007bff\", data: [] },\n    };\n\n    this.state.launches.forEach(launch => {\n      Object.keys(launch.launchStats.statusCounters).forEach(key => {\n        if (totalStats[key]) {\n          totalStats[key].data.push(launch.launchStats.statusCounters[key]);\n        }\n      });\n      totalStats[\"TOTAL\"].data.push(launch.launchStats.total);\n    });\n\n    return Object.keys(totalStats).map(key => totalStats[key]);\n  }\n\n  render() {\n    return (\n      <div>\n        <div id=\"trend\"></div>\n        <div id=\"sweet-loading\">\n          <FadeLoader sizeUnit={\"px\"} size={100} color={\"#135f38\"} loading={this.state.loading} />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default LaunchesTrendWidget;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,wBAAwB;AACjD,OAAO,KAAKC,KAAK,MAAM,iBAAiB;AACxC,SAASC,UAAU,QAAQ,gBAAgB;AAC3C,OAAOC,UAAU,MAAM,YAAY;AACnC,OAAOC,OAAO,MAAM,qBAAqB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1C,MAAMC,mBAAmB,SAASP,YAAY,CAAC;EAa7CQ,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAbfC,KAAK,GAAG;MACNC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE;QACNC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE,MAAM;QAChBC,cAAc,EAAE;MAClB,CAAC;MACDC,OAAO,EAAE;IACX,CAAC;IAIC,IAAI,CAACC,WAAW,GAAG,IAAI,CAACA,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC;IAC9C,IAAI,CAACC,WAAW,GAAG,IAAI,CAACA,WAAW,CAACD,IAAI,CAAC,IAAI,CAAC;IAC9C,IAAI,CAACE,SAAS,GAAG,IAAI,CAACA,SAAS,CAACF,IAAI,CAAC,IAAI,CAAC;EAC5C;EAEAG,yBAAyBA,CAACC,SAAS,EAAE;IACnC,IAAIA,SAAS,CAACC,SAAS,EAAE;MACvB,IAAI,CAACf,KAAK,CAACe,SAAS,GAAGD,SAAS,CAACC,SAAS;IAC5C;IACA,IAAID,SAAS,CAACZ,MAAM,EAAE;MACpB,IAAI,CAACF,KAAK,CAACE,MAAM,GAAGY,SAAS,CAACZ,MAAM;IACtC;IACA,IAAI,CAACO,WAAW,CAAC,CAAC;EACpB;EAEAO,iBAAiBA,CAAA,EAAG;IAClB,KAAK,CAACA,iBAAiB,CAAC,CAAC;IACzB,IAAI,CAACP,WAAW,CAAC,CAAC;EACpB;EAEAA,WAAWA,CAAA,EAAG;IACZ,IAAI,CAAC,IAAI,CAACT,KAAK,CAACe,SAAS,EAAE;MACzB,OAAO,EAAE;IACX;IACArB,OAAO,CAACuB,GAAG,CAAC,IAAI,CAACjB,KAAK,CAACe,SAAS,GAAG,UAAU,GAAGxB,KAAK,CAAC2B,aAAa,CAAC,IAAI,CAAClB,KAAK,CAACE,MAAM,CAAC,CAAC,CACpFiB,IAAI,CAACC,QAAQ,IAAI;MAChB,IAAI,CAACpB,KAAK,CAACC,QAAQ,GAAGmB,QAAQ,CAACC,OAAO,CAAC,CAAC;MACxC,IAAI,CAACrB,KAAK,CAACQ,OAAO,GAAG,KAAK;MAC1B,IAAI,CAACG,WAAW,CAAC,CAAC;MAClB,IAAI,CAACW,QAAQ,CAAC,IAAI,CAACtB,KAAK,CAAC;IAC3B,CAAC,CAAC,CACDuB,KAAK,CAACC,KAAK,IAAI;MACdjC,KAAK,CAACkC,cAAc,CAAC,yBAAyB,EAAED,KAAK,CAAC;MACtD,IAAI,CAACxB,KAAK,CAACQ,OAAO,GAAG,KAAK;MAC1B,IAAI,CAACc,QAAQ,CAAC,IAAI,CAACtB,KAAK,CAAC;IAC3B,CAAC,CAAC;EACN;EAEAW,WAAWA,CAAA,EAAG;IACZlB,UAAU,CAACiC,KAAK,CAAC,OAAO,EAAE;MACxBC,KAAK,EAAE;QACLC,IAAI,EAAE;MACR,CAAC;MAEDC,KAAK,EAAE;QACLF,KAAK,EAAE;UACLC,IAAI,EAAE;QACR;MACF,CAAC;MAEDE,KAAK,EAAE;QACLC,UAAU,EAAE,IAAI,CAAC/B,KAAK,CAACC,QAAQ,CAAC+B,GAAG,CAACC,MAAM,IAAI1C,KAAK,CAAC2C,gBAAgB,CAACD,MAAM,CAACE,WAAW,CAAC;MAC1F,CAAC;MAEDC,MAAM,EAAE;QACNC,MAAM,EAAE,UAAU;QAClBC,KAAK,EAAE,OAAO;QACdC,aAAa,EAAE;MACjB,CAAC;MAEDC,WAAW,EAAE;QACXC,MAAM,EAAE;UACNC,KAAK,EAAE;YACLC,gBAAgB,EAAE;UACpB;QACF;MACF,CAAC;MACDF,MAAM,EAAE,IAAI,CAAC7B,SAAS,CAAC,CAAC;MACxBgC,UAAU,EAAE;QACVC,KAAK,EAAE,CACL;UACEC,SAAS,EAAE;YACTC,QAAQ,EAAE;UACZ,CAAC;UACDC,YAAY,EAAE;YACZZ,MAAM,EAAE;cACNC,MAAM,EAAE,YAAY;cACpBC,KAAK,EAAE,QAAQ;cACfC,aAAa,EAAE;YACjB;UACF;QACF,CAAC;MAEL;IACF,CAAC,CAAC;EACJ;EAEA3B,SAASA,CAAA,EAAG;IACV,IAAIqC,UAAU,GAAG;MACfC,MAAM,EAAE;QAAEC,IAAI,EAAE,QAAQ;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAG,CAAC;MACtDC,MAAM,EAAE;QAAEH,IAAI,EAAE,QAAQ;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAG,CAAC;MACtDE,MAAM,EAAE;QAAEJ,IAAI,EAAE,QAAQ;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAG,CAAC;MACtDG,OAAO,EAAE;QAAEL,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAG,CAAC;MACxDI,KAAK,EAAE;QAAEN,IAAI,EAAE,OAAO;QAAEC,KAAK,EAAE,SAAS;QAAEC,IAAI,EAAE;MAAG;IACrD,CAAC;IAED,IAAI,CAACrD,KAAK,CAACC,QAAQ,CAACyD,OAAO,CAACzB,MAAM,IAAI;MACpC0B,MAAM,CAACC,IAAI,CAAC3B,MAAM,CAAC4B,WAAW,CAACC,cAAc,CAAC,CAACJ,OAAO,CAACK,GAAG,IAAI;QAC5D,IAAId,UAAU,CAACc,GAAG,CAAC,EAAE;UACnBd,UAAU,CAACc,GAAG,CAAC,CAACV,IAAI,CAACW,IAAI,CAAC/B,MAAM,CAAC4B,WAAW,CAACC,cAAc,CAACC,GAAG,CAAC,CAAC;QACnE;MACF,CAAC,CAAC;MACFd,UAAU,CAAC,OAAO,CAAC,CAACI,IAAI,CAACW,IAAI,CAAC/B,MAAM,CAAC4B,WAAW,CAACI,KAAK,CAAC;IACzD,CAAC,CAAC;IAEF,OAAON,MAAM,CAACC,IAAI,CAACX,UAAU,CAAC,CAACjB,GAAG,CAAC+B,GAAG,IAAId,UAAU,CAACc,GAAG,CAAC,CAAC;EAC5D;EAEAG,MAAMA,CAAA,EAAG;IACP,oBACEtE,OAAA;MAAAuE,QAAA,gBACEvE,OAAA;QAAKwE,EAAE,EAAC;MAAO;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,eACtB5E,OAAA;QAAKwE,EAAE,EAAC,eAAe;QAAAD,QAAA,eACrBvE,OAAA,CAACJ,UAAU;UAACiF,QAAQ,EAAE,IAAK;UAACC,IAAI,EAAE,GAAI;UAACtB,KAAK,EAAE,SAAU;UAAC5C,OAAO,EAAE,IAAI,CAACR,KAAK,CAACQ;QAAQ;UAAA6D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;AACF;AAEA,eAAe3E,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module"}