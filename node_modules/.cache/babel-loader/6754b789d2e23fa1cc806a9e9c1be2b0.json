{"ast":null,"code":"var _jsxFileName = \"C:\\\\Temp\\\\Quack\\\\ui\\\\src\\\\src\\\\user\\\\OrgSelect.js\";\nimport React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport qs from \"qs\";\nimport Backend from \"../services/backend\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass OrgSelect extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      session: {\n        metainfo: {\n          organizations: []\n        }\n      }\n    };\n    this.onSessionChange = this.onSessionChange.bind(this);\n  }\n  componentDidMount() {\n    Backend.get(\"user/session\").then(response => {\n      this.state.session = response;\n      this.state.session.metainfo = this.state.session.metainfo || {};\n      this.state.session.metainfo.organizations = this.state.session.metainfo.organizations || [];\n      if (this.state.session.metainfo.currentOrganization) {\n        window.location = \"/\";\n      }\n      this.setState(this.state);\n    }).catch(error => {\n      console.log(\"Org Select ERROR\");\n      console.log(error);\n      window.location = \"/auth\";\n    });\n  }\n  onSessionChange(session) {\n    this.props.onSessionChange(session);\n  }\n  changeOrganization(organizationId) {\n    Backend.post(\"user/changeorg/\" + organizationId).then(response => {\n      this.onSessionChange(response);\n      window.location = \"/\";\n    }).catch(error => {\n      console.log(\"Unable to change organization\");\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [this.state.session.metainfo.organizations.length == 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-3 font-weight-normal\",\n          children: \"You are not a part of any organization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-3 font-weight-normal\",\n          children: [\"Ask your organization administrator to add you or \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/organizations/new\",\n            children: \" create a new one\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 75\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), this.state.session.metainfo.organizations.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"select-org\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Select Organization\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), this.state.session.metainfo.organizations.map(function (organization, index) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            index: index,\n            className: \"clickable card\",\n            onClick: e => this.changeOrganization(organization.id, e),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-title\",\n                children: organization.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 25\n          }, this);\n        }.bind(this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this);\n  }\n}\nexport default _c = withRouter(OrgSelect);\nvar _c;\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"names":["React","Component","withRouter","qs","Backend","Link","jsxDEV","_jsxDEV","OrgSelect","constructor","props","state","session","metainfo","organizations","onSessionChange","bind","componentDidMount","get","then","response","currentOrganization","window","location","setState","catch","error","console","log","changeOrganization","organizationId","post","render","className","children","length","fileName","_jsxFileName","lineNumber","columnNumber","to","map","organization","index","onClick","e","id","name","_c","$RefreshReg$"],"sources":["C:/Temp/Quack/ui/src/src/user/OrgSelect.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router\";\nimport qs from \"qs\";\nimport Backend from \"../services/backend\";\nimport { Link } from \"react-router-dom\";\n\nclass OrgSelect extends Component {\n\n    constructor(props) {\n      super(props);\n       this.state = {\n          session: {metainfo:{organizations:[]}}\n        };\n        this.onSessionChange = this.onSessionChange.bind(this);\n    }\n\n    componentDidMount() {\n        Backend.get(\"user/session\")\n          .then(response => {\n            this.state.session = response;\n            this.state.session.metainfo = this.state.session.metainfo || {};\n            this.state.session.metainfo.organizations = this.state.session.metainfo.organizations || [];\n            if (this.state.session.metainfo.currentOrganization){\n                window.location = \"/\";\n            }\n            this.setState(this.state);\n          })\n          .catch(error => {\n            console.log(\"Org Select ERROR\");\n            console.log(error);\n            window.location = \"/auth\";\n          });\n    }\n\n    onSessionChange(session) {\n      this.props.onSessionChange(session);\n    }\n\n    changeOrganization(organizationId){\n        Backend.post(\"user/changeorg/\" + organizationId)\n          .then(response => {\n            this.onSessionChange(response);\n            window.location = \"/\";\n          })\n          .catch(error => {\n            console.log(\"Unable to change organization\");\n          });\n    }\n\n    render() {\n      return (\n        <div className=\"text-center\">\n            {this.state.session.metainfo.organizations.length == 0 && (\n                <div>\n                    <h1 className=\"h3 mb-3 font-weight-normal\">\n                        You are not a part of any organization\n                    </h1>\n                    <h1 className=\"h3 mb-3 font-weight-normal\">\n                        Ask your organization administrator to add you or <Link to={\"/organizations/new\"}> create a new one</Link>\n                    </h1>\n                </div>\n            )}\n            {this.state.session.metainfo.organizations.length > 1 && (\n                <div className='select-org'>\n                    <h2>Select Organization</h2>\n                    {this.state.session.metainfo.organizations.map(function (organization, index) {\n                      return (\n                        <div index={index}  className='clickable card' onClick={e => this.changeOrganization(organization.id, e)}>\n                            <div className='card-body'>\n                                <div className='card-title'>\n                                    {organization.name}\n                                </div>\n                            </div>\n                        </div>\n                      )\n                    }.bind(this))}\n                </div>\n            )}\n        </div>\n      );\n    }\n}\n\nexport default withRouter(OrgSelect);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}